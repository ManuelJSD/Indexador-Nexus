<?xml version="1.0" encoding="UTF-8"?>

<?import javafx.geometry.Insets?>
<?import javafx.scene.control.Button?>
<?import javafx.scene.control.ComboBox?>
<?import javafx.scene.control.Label?>
<?import javafx.scene.control.TextField?>
<?import javafx.scene.image.Image?>
<?import javafx.scene.image.ImageView?>
<?import javafx.scene.layout.GridPane?>
<?import javafx.scene.layout.HBox?>
<?import javafx.scene.layout.VBox?>

<VBox xmlns="http://javafx.com/javafx/17" xmlns:fx="http://javafx.com/fxml/1" 
      fx:controller="org.nexus.indexador.controllers.frmInitialSetup"
      spacing="20" style="-fx-padding: 30; -fx-background-color: #2b2b2b;"
      prefWidth="700" prefHeight="450">
    
    <!-- Header -->
    <VBox spacing="10" alignment="CENTER">
        <Label text="Bienvenido a Indexador Nexus" style="-fx-font-size: 22px; -fx-font-weight: bold; -fx-text-fill: #e0e0e0;"/>
        <Label text="Configuración Inicial" style="-fx-font-size: 14px; -fx-text-fill: #b0b0b0;"/>
        <Label text="Por favor, configure las rutas de los recursos necesarios para comenzar." 
               wrapText="true" style="-fx-font-size: 12px; -fx-text-fill: #909090; -fx-text-alignment: center;"/>
    </VBox>
    
    <!-- Paths Configuration -->
    <GridPane hgap="10" vgap="15">
        <Label text="Carpeta de Gráficos:" GridPane.rowIndex="0" GridPane.columnIndex="0" 
               style="-fx-text-fill: #e0e0e0; -fx-font-size: 12px;"/>
        <TextField fx:id="txtGraphicsPath" GridPane.rowIndex="0" GridPane.columnIndex="1" prefWidth="450" 
                   promptText="Ej: C:/AO/graphics"/>
        <Button fx:id="btnBrowseGraphics" text="Examinar..." onAction="#onBrowseGraphics" 
                GridPane.rowIndex="0" GridPane.columnIndex="2" prefWidth="100"/>
        
        <Label text="Carpeta de Init:" GridPane.rowIndex="1" GridPane.columnIndex="0" 
               style="-fx-text-fill: #e0e0e0; -fx-font-size: 12px;"/>
        <TextField fx:id="txtInitPath" GridPane.rowIndex="1" GridPane.columnIndex="1" prefWidth="450"
                   promptText="Ej: C:/AO/init"/>
        <Button fx:id="btnBrowseInit" text="Examinar..." onAction="#onBrowseInit" 
                GridPane.rowIndex="1" GridPane.columnIndex="2" prefWidth="100"/>
        
        <Label text="Carpeta de Dat:" GridPane.rowIndex="2" GridPane.columnIndex="0" 
               style="-fx-text-fill: #e0e0e0; -fx-font-size: 12px;"/>
        <TextField fx:id="txtDatPath" GridPane.rowIndex="2" GridPane.columnIndex="1" prefWidth="450"
                   promptText="Ej: C:/AO/dat"/>
        <Button fx:id="btnBrowseDat" text="Examinar..." onAction="#onBrowseDat" 
                GridPane.rowIndex="2" GridPane.columnIndex="2" prefWidth="100"/>
        
        <Label text="Carpeta de Exportados:" GridPane.rowIndex="3" GridPane.columnIndex="0" 
               style="-fx-text-fill: #e0e0e0; -fx-font-size: 12px;"/>
        <TextField fx:id="txtExportPath" GridPane.rowIndex="3" GridPane.columnIndex="1" prefWidth="450"
                   promptText="Ej: C:/AO/export"/>
        <Button fx:id="btnBrowseExport" text="Examinar..." onAction="#onBrowseExport" 
                GridPane.rowIndex="3" GridPane.columnIndex="2" prefWidth="100"/>
    </GridPane>
    
    <!-- Indexing System Selection -->
    <VBox spacing="10">
        <Label text="Sistema de Indexado:" style="-fx-text-fill: #e0e0e0; -fx-font-size: 14px; -fx-font-weight: bold;"/>
        <Label text="Seleccione el sistema de indexado para cabezas y cascos:" 
               style="-fx-text-fill: #b0b0b0; -fx-font-size: 11px;"/>
        
        <HBox spacing="20" alignment="CENTER">
            <!-- Sistema de Moldes -->
            <VBox fx:id="cardMoldSystem" alignment="CENTER" spacing="8" 
                  style="-fx-background-color: #3c3c3c; -fx-padding: 20; -fx-background-radius: 8; -fx-cursor: hand; -fx-border-color: #4a90d9; -fx-border-width: 2; -fx-border-radius: 8;"
                  onMouseClicked="#onMoldSystemClick" prefWidth="200" prefHeight="180">
                <ImageView fitWidth="80" fitHeight="80" preserveRatio="true">
                    <image>
                        <Image url="@images/indexing_mold.png"/>
                    </image>
                </ImageView>
                <Label text="Sistema de Moldes" style="-fx-text-fill: #e0e0e0; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                <Label text="Usa texturas y coordenadas" wrapText="true" textAlignment="CENTER"
                       style="-fx-text-fill: #909090; -fx-font-size: 10px;"/>
                <Label text="(Nuevo)" style="-fx-text-fill: #4a90d9; -fx-font-size: 9px; -fx-font-style: italic;"/>
            </VBox>
            
            <!-- Sistema Tradicional -->
            <VBox fx:id="cardTraditionalSystem" alignment="CENTER" spacing="8" 
                  style="-fx-background-color: #3c3c3c; -fx-padding: 20; -fx-background-radius: 8; -fx-cursor: hand; -fx-border-color: #50c878; -fx-border-width: 2; -fx-border-radius: 8;"
                  onMouseClicked="#onTraditionalSystemClick" prefWidth="200" prefHeight="180">
                <ImageView fitWidth="80" fitHeight="80" preserveRatio="true">
                    <image>
                        <Image url="@images/indexing_traditional.png"/>
                    </image>
                </ImageView>
                <Label text="Sistema Tradicional" style="-fx-text-fill: #e0e0e0; -fx-font-size: 13px; -fx-font-weight: bold;"/>
                <Label text="Índices directos a gráficos" wrapText="true" textAlignment="CENTER"
                       style="-fx-text-fill: #909090; -fx-font-size: 10px;"/>
                <Label text="(Actual)" style="-fx-text-fill: #50c878; -fx-font-size: 9px; -fx-font-style: italic;"/>
            </VBox>
        </HBox>
    </VBox>
    
    <!-- Info Box -->
    <VBox spacing="5" style="-fx-background-color: #3c3c3c; -fx-padding: 15; -fx-background-radius: 5;">
        <Label text="ℹ️  Información:" style="-fx-font-size: 12px; -fx-font-weight: bold; -fx-text-fill: #4a90d9;"/>
        <Label text="• Gráficos: Carpeta con archivos .bmp/.png" wrapText="true" style="-fx-font-size: 11px; -fx-text-fill: #b0b0b0;"/>
        <Label text="• Init: Carpeta con archivos .ind (Graficos.ind, Cabezas.ind, etc.)" wrapText="true" style="-fx-font-size: 11px; -fx-text-fill: #b0b0b0;"/>
        <Label text="• Dat: Carpeta con archivos .dat" wrapText="true" style="-fx-font-size: 11px; -fx-text-fill: #b0b0b0;"/>
        <Label text="• Exportados: Carpeta donde se guardarán los archivos exportados" wrapText="true" style="-fx-font-size: 11px; -fx-text-fill: #b0b0b0;"/>
    </VBox>
    
    <!-- Buttons -->
    <HBox spacing="10" alignment="CENTER_RIGHT">
        <Button fx:id="btnFinish" text="Finalizar Configuración" onAction="#onFinish" 
                prefWidth="180" style="-fx-background-color: #4a90d9; -fx-text-fill: white; -fx-font-weight: bold;"/>
    </HBox>
</VBox>
